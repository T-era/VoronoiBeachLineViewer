<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
<style type="text/css">
html, body {
	margin: 0px;
	padding: 0px;
	width: 100%;
	height: 100%;
}
div.border {
	border: 1px #aaf solid;
}
canvas {
	float: left;
	width: 80%;
	height: 100%;
}
input {
	display: block;
}
</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script type="text/javascript" src="JunkRack.js"></script>
<script type="text/javascript" src="Circle.js"></script>
<script type="text/javascript" src="Curv.js"></script>
<script type="text/javascript" src="Event.js"></script>
<script type="text/javascript" src="BeachLineNode.js"></script>
<script type="text/javascript" src="BeachLine.js"></script>
<script type="text/javascript" src="MotherPoint.js"></script>
<script type="text/javascript" src="Line.js"></script>
<script type="text/javascript">
function getWorldSize() {
	return $("#canvas")[0];
}

$(function() {
	var canvas = $("#canvas")[0];
	// 表示上のサイズに合わせて、描画領域のサイズを設定。(円が丸っこく見えるように)
	canvas.height = canvas.width * canvas.offsetHeight / canvas.offsetWidth;
	var context = canvas.getContext("2d");
	
//	var seed = [{x:110,y:15},{x:115,y:45},{x:80,y:40},{x:150,y:50},{x:90,y:80},{x:116,y:70},{x:120,y:70}];
	var seed = [{x:60,y:80},{x:90,y:120},{x:60,y:160},{x:90,y:20},{x:90,y:220}
		,{x:130,y:80},{x:130,y:160}];
//	var seed = randomSeed(12);

	var bl = new BeachLine(seed
		, function(){});
	$("#eventButton")
		.bind("click", function() {
			bl.stepNextEvent();
			bl.draw(context);
		});
	$("#pixelButton")
		.bind("click", function() {
			bl.stepPixel();
			bl.draw(context);
		});
	bl.draw(context);

	function randomSeed(count) {
		var array = [];
		for (var i = 0; i < count; i ++) {
			array.push({
				x: Math.random() * canvas.width,
				y: Math.random() * canvas.height
			});
		}
		return array;
	}
});
</script>
	</head>
	<body>
		<canvas id="canvas" width="1000">HTML5 Canvas required!</canvas>
		<div style="float: left;">
			<input type="text" value="" id="showPosition" />
			<div class="border" id="BeachLineControl">
				<input type="button" value="Next EVENT" id="eventButton" />
				<input type="button" value="Next PIXEL" id="pixelButton" />
			</div>
		</div>
	</body>
</html>